{% extends 'base.html' %}

{% block header %}
  <div class="accounts_header">
    <h1>{% block title %}Overview{% endblock %}</h1>
    {% if g.user %}
    <div class="accounts">
      <h3>Your accounts: </h3>
      <select name="account_selection" class="accounts_selector">
        {% for type_of_account in accounts %}
          <optgroup label="{{ type_of_account }}">
            {% for account in accounts[type_of_account] %}
            <option value="{{account[name_of_account]}}">{{account['name_of_account']}} : ${{account['balance']}}</option>
            {% endfor %}
          </optgroup>
          {% endfor %}
          <optgroup label="Add new account">
            <option value="new_account">+</option>
          </optgroup>
      </select>
    </div>
    {% endif %}
  </div>
  {% if g.user %}
  <div class="actions">
    <a class="action" href="{{ url_for('overview.create') }}">+ New Entry</a>
    <div class="option_panel">
      <input type="checkbox" id="subtotal" name="subtotal" value="subtotal">
      <label for="subtotal">Subtotals</label>
    </div>
  </div>
  {% else %}
    <h1> You are not registered</h1>

  {% endif %}
{% endblock %}

{% block content %}
  {% for post in posts %}
    <div class="post-container {% if post['type_of_transaction'] == 0 %}expense{% else %}income{% endif %}">
      <h1>
        {% if post['type_of_transaction'] == 0 %}E{% else %}I{% endif %}
      </h1>
      <h2>{{ post['title']}}</h2>
      <h1>{{ post['amount']}} $</h1>
      <h2>{{ post['created']}}</h2>
    </div>
  {% endfor %}
{% endblock %}